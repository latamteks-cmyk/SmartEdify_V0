---
id: auth-token-lifecycle
title: "SmartEdify â€“ Auth Token Lifecycle"
description: "State transitions for access and refresh tokens, including revocation, logout, and rate limiting protections."
updated: 2025-02-14
tags: ["auth", "tokens", "state"]
---
stateDiagram-v2
    [*] --> Unauthenticated

    Unauthenticated --> Authenticated: Login 'password / oauth'
    state Authenticated {
        [*] --> AccessValid
        AccessValid --> AccessExpiring: T ~ 'exp - threshold'
        AccessExpiring --> AccessValid: Silent refresh success
        AccessExpiring --> AccessExpired: Not refreshed in time
        AccessExpired --> AccessValid: Refresh with valid refresh token
        AccessExpired --> Revoked: Refresh token revoked
    }

    Authenticated --> LoggedOut: User logout
    Authenticated --> Revoked: Admin/security revocation

    state Revoked {
        [*] --> RevokedAccess
        RevokedAccess --> [*]
    }

    LoggedOut --> Unauthenticated: Clear session

    Unauthenticated --> RateLimited: Excessive failed attempts
    RateLimited --> Unauthenticated: Cooldown elapsed

    note right of Authenticated: Access Token 'short TTL'<br/>Refresh Token 'long TTL'<br/>Rotation on each refresh<br/>Store only refresh 'httpOnly cookie'

